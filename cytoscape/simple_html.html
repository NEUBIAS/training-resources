<!DOCTYPE html>
<html>
<head>
    <title>cytoscape-dagre.js demo</title>

    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">

    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>

    <!-- for testing with local version of cytoscape.js -->
    <!--<script src="../cytoscape.js/build/cytoscape.js"></script>-->

    <script src="https://unpkg.com/dagre@0.7.4/dist/dagre.js"></script>
    <script src="https://cytoscape.org/cytoscape.js-dagre/cytoscape-dagre.js"></script>
    <style>
        body {
            font-family: helvetica;
            font-size: 14px;
        }
        #cy {
            width: 800px;
            height: 600px;
            display: block;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>Learning Modules Graph</h1>
    <div id="cy"></div>

    <script>
        window.addEventListener('DOMContentLoaded', function() {
            // Register the Dagre layout extension (this might happen automatically now that the script is included)
            // cytoscape.use(cytoscapeDagre);

            var cy = window.cy = cytoscape({
                container: document.getElementById('cy'),
                boxSelectionEnabled: false,
                autounselectify: true,

                layout: {
                    name: 'dagre'
                },

                style: [
                    {
                        selector: 'node',
                        style: {
                            'label': 'data(label)',
                            'shape': 'rectangle',
                            'width': 'auto',
                            'padding': '10px',
                            'background-color': '#f0f0f0',
                            'border-color': '#ccc',
                            'border-width': 1,
                            'text-valign': 'center',
                            'text-halign': 'center'
                        }
                    },
                    {
                        selector: 'edge',
                        style: {
                            'width': 2,
                            'line-color': '#888',
                            'target-arrow-color': '#888',
                            'target-arrow-shape': 'triangle',
                            'curve-style': 'bezier'
                        }
                    }
                ],

                elements: {
                    nodes: [
                        { data: { id: 'multichannel', label: 'multichannel' ,
                        url: 'https://neubias.github.io/training-resources/pixels/index.html' } },
                        { data: { id: 'digital image basics', label: 'digital image basics' } },
                        { data: { id: 'LUT', label: 'LUT' } },
                        { data: { id: 'data types', label: 'data types' } },
                        { data: { id: 'N Dimensional images', label: 'N Dimensional images' } },
                        { data: { id: 'spatal calibration', label: 'spatal calibration' } }
                    ],
                    edges: [
                        { data: { source: 'digital image basics', target: 'multichannel' } },
                        { data: { source: 'LUT', target: 'multichannel' } },
                        { data: { source: 'data types', target: 'multichannel' } },
                        { data: { source: 'digital image basics', target: 'LUT' } },
                        { data: { source: 'digital image basics', target: 'spatal calibration' } },
                        { data: { source: 'multichannel', target: 'N Dimensional images' } }
                    ]
                }

            });

        });
        cy.on('tap', 'node', function(evt){
            const url = evt.target.data('url');
            if (url) {
            window.open(url, '_blank');
            }
        });
    </script>

</body>
</html>